{
    "widgetType": "phpparser",
    "cleanURLParameters":["abc","xyz","agency","year","calyear","title","salamttype"],
    "urlParamMap":{
        "abc":"employee_id.employee_id",
        "xyz":"employee_id.employee_id",
        "agency":"agency_id.agency_id",
        "title":"civil_service_title.civil_service_title",
        "year":"fiscal_year_id.fiscal_year_id",
        "calyear":"calendar_fiscal_year_id.calendar_fiscal_year_id",
        "salamttype":"amount_basis_id.amount_basis_id"
    },
    "limit":"17",
    "dataset": "checkbook:payroll",
    "columns": [
        "agency.agency",
        "agency_name.agency_name",
        "pay_frequency.pay_frequency",
        "civil_service_title.civil_service_title",
        "amount_basis_id.amount_basis_id",
        "max_annual_salary",
        "total_base_salary",
        "total_overtime_amount",
        "total_other_payments",
        "total_gross_pay"
    ],
    "adjustParameters":"
        if(_getRequestParamValue('calyear')){
            $year_id = _getRequestParamValue('calyear');
        }
        if(_getRequestParamValue('year')){
            $year_id = _getRequestParamValue('year');
        }
        unset($parameters['amount_basis_id.amount_basis_id']);

        $adjustedParameters = $parameters;
        if(function_exists('_checkbook_project_applyParameterFilters')){
              $adjustedParameters = _checkbook_project_applyParameterFilters($node,$parameters);
        }
        return $adjustedParameters;
    ",
    "transformationPHP":"
        $year = _getRequestParamValue('calyear') ? _getRequestParamValue('calyear') : _getRequestParamValue('year');
        $year_type = _getRequestParamValue('calyear') ? 'C' : 'B';
        $month = _getRequestParamValue('month');
        $agency = _getRequestParamValue('agency');
        $title = _getRequestParamValue('title');
        $employee_id = _getRequestParamValue('abc') ? _getRequestParamValue('abc') : _getRequestParamValue('xyz');

        $max_annual_salary = payrollDetails::getMaxAnnualSalary($year, $year_type, $month, $agency, $title, $employee_id);

        foreach($node->data as &$row) {
            $row['max_annual_salary'] = $max_annual_salary;
        }
        return $node->data;
    ",
     "template":"payroll_employee_agency_payroll_summary"
}