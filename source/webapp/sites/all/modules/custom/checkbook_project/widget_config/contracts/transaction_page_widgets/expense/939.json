{
    "widgetType":"data_tables",
    "widgetSubType":"dataTableList",
    "stickyHeader":true,
    "cleanURLParameters":[
        "subvendor","vendortype","mwbe","doctype","contstatus","year","calyear","agency","vendor","curamtr","vendorcode","vendornm","vendornm_exact","contdesc","agrmnttype",
        "agencyh","contnum","contnum_exact","aptpin","pin","awdmethod","curamt","startdate","enddate","regdate","cindustry","csize","modamt","fvendor","subcontstatus","subvendorstatus"
    ],
    "urlParamMap":{
        "agrmnttype":"agreement_type_id",
        "mwbe":"minority_type_id",
        "agency":"agency_id",
        "fvendor":"vendor_id",
        "vendorcode":"vendor_name",
        "vendor":"prime_vendor_id",
        "curamtr":"maximum_contract_amount",
        "subvendor":"vendor_id",
        "contdesc":"description",
        "agencyh":"agency_history_id",
        "aptpin":"brd_awd_no",
        "pin":"tracking_number",
        "awdmethod":"award_method_id",
        "curamt":"maximum_contract_amount",
        "startdate":"effective_begin_date",
        "enddate":"effective_end_date",
        "regdate":"registered_date",
        "cindustry":"industry_type_id",
        "csize":"award_size_id",
        "modamt":"dollar_difference",
        "subcontstatus":"scntrc_status",
        "contstatus":"status_flag",
        "doctype":"document_code",
        "vendornm":"prime_sub_vendor_code",
        "vendornm_exact":"vendor_name",
        "vendortype":"prime_sub_vendor_code_by_type",
        "subvendorstatus":"aprv_sta",
        "contnum":"contract_number",
        "contnum_exact":"contract_number",
        "year":"year"
    },
    "allowRequestParams":["smnid","doctype"],
    "paramTypeConfig":{"vendornm_exact":"eqignorecase","curamtr":"rangeid","vendornm":"like","contdesc":"contains","contnum":"like","contnum_exact":"eqignorecase","aptpin":"like","pin":"like","curamt":"range",
        "startdate":"range","enddate":"range","regdate":"range","modamt":"ne"},
    "header":"
        $header = NULL;
        $header .= widget_data_tables_export_link($node);
        return $header;
    ",
    "useList":true,
    "getTotalDataCount":true,
    "limit":"35",
    "noDataInitialLoad":true,
    "html_class":"initiative-table",
    "no_results_content":"No Results Found",
    "dataset":"checkbook:all_agreement_transactions_by_prime_vendor",
    "uniqueSortColumn":"agreement_id",
    "export_columns":["agreement_id"],
    "columns": [
        "agreement_id",
        "contract_number",
        "contract_original_agreement_id",
        "original_contract_amount",
        "agreement_type_name",
        "sub_contract_id",
        "master_agreement_yn",
        "master_contract_number",
        "master_agreement_id",
        "has_children",
        "has_mwbe_children",
        "document_version",
        "maximum_contract_amount",
        "dollar_difference",
        "percent_difference",
        "description",
        "scntrc_status",
        "scntrc_status_name",
        "prime_vendor_name",
        "prime_minority_type_id",
        "prime_minority_type_name",
        "sub_vendor_name",
        "sub_minority_type_id",
        "sub_minority_type_name",
        "aprv_sta",
        "aprv_sta_name",
        "agency_id",
        "agency_name",
        "award_method_name",
        "industry_type_name",
        "expenditure_object_names",
        "effective_begin_date",
        "effective_end_date",
        "registered_date",
        "tracking_number",
        "brd_awd_no",
        "document_code",
        "original_agreement_id"
    ],
    "preProcessConfiguration":"
        $doctype = _getRequestParamValue('doctype');
        $doctypes = isset($doctype) ? explode('~', $doctype) : array();
        $is_master_agreement = in_array('MA1', $doctypes) || in_array('MMA1', $doctypes);
        $node->is_master_agreement = $is_master_agreement;
    ",
    "caption":"",
    "derivedColumns": {
        "child_contrats_link":{
            "type":"expression2",
            "expression":"ContractURLHelper::expenseContractsExpandLink($row, $node)"
        },
        "contract_link": {
            "type":"expression2",
            "expression":"ContractURLHelper::expenseContractsLink($row, $node, false, $row['contract_original_agreement_id'])"
        },
        "parent_contract_link": {
            "type":"expression2",
            "expression":"(($row['master_agreement_yn'] == 'Y') ? 'N/A' : ContractURLHelper::prepareExpenseContractLink($row, $node, true, $row['contract_original_agreement_id']))"
        },
        "parent_contract_export":{
            "type":"expression2",
            "expression":"(($row['master_agreement_yn'] == 'Y') ? 'N/A' : $row['master_contract_number'])"
        },
        "formatted_original_amount": {
            "type":"expression2",
            "expression":"custom_number_formatter_basic_format($row['original_contract_amount'])"
        },
        "formatted_current_amount": {
            "type":"expression2",
            "expression":"custom_number_formatter_basic_format($row['maximum_contract_amount'])"
        },
        "formatted_spent_to_date": {
            "type":"expression2",
            "expression":"
            '<a href=\"/spending/transactions'
            .  ($row['master_agreement_yn'] == 'Y' ? '/magid/' : '/agid/') . $row['original_agreement_id']
            .  _checkbook_project_get_url_param_string(\"dashboard\") . _checkbook_project_get_url_param_string(\"mwbe\")
            .  ( $row['type_of_year'] == 'B' ? ('/year/'. $row['fiscal_year_id'].'/syear/'. $row['fiscal_year_id']) : ('/calyear/'.$row['fiscal_year_id']. '/scalyear/'.$row['fiscal_year_id']) )
            .  '/newwindow\" class=\"new_window\">'. custom_number_formatter_basic_format($row['spending_amount']) . '</a>'
            "
        },
        "current_prime_minority_type_id": {
            "type":"expression2",
            "expression":"$row['minority_type_id']"
        },
        "vendor_formatted": {
            "type":"expression2",
            "expression":"_get_tooltip_markup($row['vendor_name'],30)"
        },
        "vendor_name_link": {
            "type":"expression2",
            "expression":" '<a href=\"/contracts_landing'
            . ContractUtil::get_contracts_vendor_link_by_mwbe_category($row)
            . '?expandBottomCont=true\">'. $row['vendor_formatted'] . '</a>'  "
        },
        "agency_formatted": {
            "type":"expression2",
            "expression":"_get_tooltip_markup($row['agency_name'],26)"
        },
        "agency_name_link": {
            "type":"expression2",
            "expression":" '<a href=\"/contracts_landing'
            ._checkbook_append_url_params()
            .  (isset($row['fiscal_year_id']) ? '/year/'.$row['fiscal_year_id'] : '')
            .  (isset($row['type_of_year']) ? '/yeartype/'.$row['type_of_year'] : '')
            .  _checkbook_project_get_url_param_string(\"contstatus\",\"status\")
            . '/agency/' . $row['agency_id']
            .  '?expandBottomCont=true\">'. $row['agency_formatted'] . '</a>'  "
        },
        "purpose_formatted": {
            "type":"expression2",
            "expression":"_get_tooltip_markup($row['description'],36)"
        },
        "expense_cat_formatted": {
            "type":"expression2",
            "expression":"_get_tooltip_markup($row['expenditure_object_names'],36)"
        },
        "expense_cat": {
            "type":"expression2",
            "expression":"($row['is_prime_or_sub'] == 'S') ? '' : $row['expense_cat_formatted']"
        },
        "expense_cat_export": {
            "type":"expression2",
            "expression":"($row['is_prime_or_sub'] == 'S') ? '' : $row['expenditure_object_names']"
        },
        "award_method_formatted": {
            "type":"expression2",
            "expression":"_get_tooltip_markup($row['award_method_name'],36)"
        },
        "contract_type_formatted": {
            "type":"expression2",
            "expression":"_get_tooltip_markup($row['agreement_type_name'],36)"
        },
        "industry_name_formatted": {
            "type":"expression2",
            "expression":"_get_tooltip_markup($row['industry_type_name'],36)"
        },
        "formatted_dollar_diff": {
            "type":"expression2",
            "expression":"custom_number_formatter_basic_format($row['dollar_difference'])"
        },
        "formatted_percent_diff": {
            "type":"expression2",
            "expression":"round($row['percent_difference'],2) . '%'"
        },
        "sub_contract_reference_id":{
            "type":"expression2",
            "expression":"($row['sub_contract_id'] == '' || $row['sub_contract_id'] == NULL) ? 'N/A' : $row['sub_contract_id']"
        },
        "prime_vendor_name_formatted": {
            "type": "expression2",
            "expression": "_get_tooltip_markup($row['prime_vendor_name'],30)"
        },
        "prime_vendor_name_link": {
            "type": "expression2",
            "expression": " '<a href=\"/contracts_landing'
            . ContractUtil::get_contracts_vendor_link($row['prime_vendor_id'],_getRequestParamValue('year'),_getRequestParamValue('yeartype'), _getRequestParamValue('agency'))
            . '?expandBottomCont=true\">'. $row['prime_vendor_name_formatted'] . '</a>'  "
        },
        "subvendor_name_formatted": {
            "type": "expression2",
            "expression": "_get_tooltip_markup($row['sub_vendor_name'],30)"
        },
        "subvendor_name": {
            "type": "expression2",
            "expression": "$row['sub_vendor_name'] == NULL ? 'NOT PROVIDED' : '<a href=\"/contracts_landing'  . ContractUtil::get_contracts_vendor_link_sub($row[sub_vendor_id],_getRequestParamValue('year'),_getRequestParamValue('yeartype')) .  '?expandBottomCont=true\">' .$row[subvendor_name_formatted]. '</a>'"
        },
        "subvendor_name_export": {
            "type": "expression2",
            "expression": "($row['sub_vendor_name'] == '' || $row['sub_vendor_name'] == NULL) ? 'NOT PROVIDED' : $row['sub_vendor_name']"
        },
        "sub_mwbe_category_name": {
            "type": "expression2",
            "expression": "($row['sub_minority_type_name'] == '' || $row['sub_minority_type_name'] == NULL) ? 'NOT PROVIDED' : $row['sub_minority_type_name']"
        },
        "contract_includes_sub":{
            "type": "expression2",
            "expression": "($row['scntrc_status_name'] == 'N/A' || $row['scntrc_status_name'] == NULL) ? 'N/A' : $row['scntrc_status_name']"
        },
        "subvendor_status_pip":{
            "type": "expression2",
            "expression": "($row['aprv_sta_value'] == 'N/A' || $row['aprv_sta_value'] == NULL) ? 'N/A' : _get_tooltip_markup($row['aprv_sta_value'],36)"
        },
        "subvendor_status_pip_export":{
            "type": "expression2",
            "expression": "($row['aprv_sta_value'] == 'N/A' || $row['aprv_sta_value'] == NULL) ? 'N/A' : $row['aprv_sta_value']"
        }
    },
    "skipCustomPadding":true,
    "table_columns": [
        {"label":"<div></div>","colLabel":"","column":"child_contrats_link","export":false},
        {"labelAlias":"contract_id","column":"contract_link","sortSourceColumn":"contract_number"},
        {"labelAlias":"contract_includes_sub","column":"contract_includes_sub","sortSourceColumn":"scntrc_status_name","exportColumn":"contract_includes_sub"},
        {"labelAlias":"sub_contract_reference_id","column":"sub_contract_reference_id","sortSourceColumn":"sub_contract_id","exportColumn":"sub_contract_reference_id"},
        {"labelAlias":"contract_purpose","column":"purpose_formatted","sortSourceColumn":"description"},
        {"labelAlias":"version","column":"document_version"},
        {"labelAlias":"fms_doc_id","column":"parent_contract_link", "exportColumn":"parent_contract_export", "sortSourceColumn":"master_contract_number"},
        {"labelAlias":"current_amount","column":"formatted_current_amount","sortSourceColumn":"maximum_contract_amount"},
        {"labelAlias":"original_amount","column":"formatted_original_amount","sortSourceColumn":"original_contract_amount"},
        {"labelAlias":"spent_to_date","column":"formatted_spent_to_date","sortSourceColumn":"spending_amount"},
        //10
        {"labelAlias":"prime_vendor","column":"prime_vendor_name_link","sortSourceColumn":"prime_vendor_name"},
        {"labelAlias":"prime_mwbe_category","column":"prime_minority_type_name","sortSourceColumn":"prime_minority_type_name"},
        {"labelAlias":"sub_vendor_name","column":"subvendor_name","sortSourceColumn":"sub_vendor_name","exportColumn":"subvendor_name"},
        {"labelAlias":"sub_mwbe_category","column":"sub_mwbe_category_name","sortSourceColumn":"sub_minority_type_name","exportColumn":"sub_mwbe_category_name"},

        {"labelAlias":"subvendor_status_pip","column":"subvendor_status_pip","sortSourceColumn":"aprv_sta_value","exportColumn":"subvendor_status_pip_export"},
        {"labelAlias":"contract_agency","column":"agency_name_link","sortSourceColumn":"agency_name"},
        {"labelAlias":"contract_type","column":"contract_type_formatted","sortSourceColumn":"agreement_type_name"},
        {"labelAlias":"award_method","column":"award_method_formatted","sortSourceColumn":"award_method_name"},
        {"labelAlias":"expense_category","column":"expense_cat","sortSourceColumn":"expenditure_object_names","exportColumn":"expense_cat_export"},
        {"labelAlias":"contract_industry","column":"industry_name_formatted","sortSourceColumn":"industry_type_name"},
        // 20
        {"labelAlias":"start_date","column":"effective_begin_date"},
        {"labelAlias":"end_date","column":"effective_end_date"},
        {"labelAlias":"reg_date","column":"registered_date"},
        {"labelAlias":"pin","column":"tracking_number"},
        {"labelAlias":"apt_pin","column":"brd_awd_no"}
    ],
    "exportColumnSqlOverride":[
        {
            "column":"mwbe_category_name",
            "sourceColumn":"minority_type_id",
            "sql":"
            case
            when minority_type_id = 2 then 'Black American'
            when minority_type_id = 3 then 'Hispanic American'
            when minority_type_id = 7 then 'Non-M/WBE'
            when minority_type_id = 9 then 'Women'
            when minority_type_id = 11 then 'Individuals and Others'
            else 'Asian American'
            end as minority_type_name
            "
        },
        {
            "column":"is_sub_vendor",
            "sourceColumn":"is_prime_or_sub",
            "sql":"case when is_prime_or_sub = 'P' then 'No' else 'Yes' end as vendor_type"
        },
        {
            "column":"associated_prime_vendor_name",
            "sourceColumn":"prime_vendor_name",
            "sql":"case when l1.is_prime_or_sub = 'P' then 'N/A' else prime_vendor_name end"
        },
        {
            "column":"expense_cat",
            "sourceColumn":"expenditure_object_names",
            "sql":"case when l1.is_prime_or_sub = 'S' then '' else expenditure_object_names end"
        },
        {
            "column":"sub_contract_reference_id",
            "sourceColumn":"sub_contract_id",
            "sql":"case when sub_contract_id IS NULL then 'N/A' else sub_contract_id end"
        }
    ],
    "adjustParameters":"return ContractUtil::adjustActiveContractParameterFilters($node, $parameters);",
    "adjustDataTableOptions":"
        $adjustDataTableOptions = $node->widgetConfig->dataTableOptions;
        if(!$node->is_master_agreement) {
            $adjustDataTableOptions->fnInitComplete = '##function () { new FixedColumns( oTable, {\"iLeftColumns\": 2,\"iLeftWidth\": 180} );}##';
        }
    ",
    "dataTableOptions":{
        "bRetrieve":true,
        "bServerSide":true,
        "bProcessing":true,
        "bFilter":false,
        "bPaginate":true,
        "iDisplayLength":35,
        "sPaginationType":"full_numbers",
        "sDom":"<pr><t><ip>",
        "oLanguage": {
            "sInfo":"Displaying transactions _START_ - _END_ of _TOTAL_",
            "sProcessing":"<img src='/sites/all/themes/checkbook/images/loading_large.gif' title='Processing...'/>"
        },
        "bInfo":true,
        "aoColumns": [
            {"sClass":"expander","bSortable":false,"sWidth":"30px"},
            {"sClass":"text","sWidth":"150px","asSorting":["asc","desc"]},
            {"sClass":"text","sWidth":"180px","asSorting":["asc","desc"]},
            {"sClass":"text","sWidth":"180px","asSorting":["asc","desc"]},
            {"sClass":"text","sWidth":"180px","asSorting":["asc","desc"]},
            {"sClass":"text","sWidth":"180px","asSorting":["asc","desc"]},
            {"sClass":"text","sWidth":"180px","asSorting":["asc","desc"]},
            {"sClass":"text","sWidth":"180px","asSorting":["asc","desc"]},
            {"sClass":"text","sWidth":"180px","asSorting":["asc","desc"]},
            {"sClass":"text","sWidth":"180px","asSorting":["asc","desc"]},
            // 10
            {"sClass":"text","sWidth":"180px","asSorting":["asc","desc"]},
            {"sClass":"text","sWidth":"180px","asSorting":["asc","desc"]},
            {"sClass":"text","sWidth":"180px","asSorting":["asc","desc"]},
            {"sClass":"text","sWidth":"180px","asSorting":["asc","desc"]},
            {"sClass":"text","sWidth":"180px","asSorting":["asc","desc"]},
            {"sClass":"text","sWidth":"180px","asSorting":["asc","desc"]},
            {"sClass":"text","sWidth":"180px","asSorting":["asc","desc"]},
            {"sClass":"text","sWidth":"180px","asSorting":["asc","desc"]},
            {"sClass":"text","sWidth":"180px","asSorting":["asc","desc"]},
            {"sClass":"text","sWidth":"180px","asSorting":["asc","desc"]},
            // 20
            {"sClass":"text","sWidth":"180px","asSorting":["asc","desc"]},
            {"sClass":"text","sWidth":"180px","asSorting":["asc","desc"]},
            {"sClass":"text","sWidth":"180px","asSorting":["asc","desc"]},
            {"sClass":"text","sWidth":"180px","asSorting":["asc","desc"]},
            {"sClass":"text","sWidth":"180px","asSorting":["asc","desc"]}
        ],
        "aaSorting":[[10,"asc"]],
        "sScrollX":"100%",
        "bScrollCollapse": true
    },
    "customJS":"jQuery('#dtl_expand').live( 'click',function () {
        var nTr = this.parentNode.parentNode.parentNode;
        if ( jQuery(this).attr('class').match('loader') ){return;}
        if ( jQuery(this).attr('class').match('expanded') ){
            jQuery(this).removeClass('expanded').addClass('collapsed');
            oTable.fnClose( nTr );
        }
        else{
            jQuery(this).removeClass('collapsed').addClass('loader');
            fnLoadChildRecords(nTr, jQuery(this));
        }} );
    ",
    "customExternalJS":"

        function prepareTableListFilterUrl() {
            var agencyIds = getNamedFilterCriteria('fagencyId');
            var oVendorIds = getNamedFilterCriteria('fvendorId');
            var oVendorNms = getNamedFilterCriteria('fvendorNm');
            var oVendorCodes = getNamedFilterCriteria('fvendorCode');
            var oContractNumber = getNamedFilterCriteria('fContractNumber');
            var oSubVendorStatus = getNamedFilterCriteria('fSubVendorStatus');
            var oMinorityTypeId = getNamedFilterCriteria('fminorityTypeId');
            var oVendorType = getNamedFilterCriteria('fvendorType');
            var oCurAmount = getNamedFilterCriteria('fCurAmount');
            var oAwdMethod = getNamedFilterCriteria('fAwdMethodId');
            var oIndustryType = getNamedFilterCriteria('fIndustryTypeId');
            var oSubContStatus = getNamedFilterCriteria('fSubContStatus');

            var cUrl = oTable.fnSettings().sAjaxSource;

            var cUrlArray = cUrl.split('/');

            cUrl = adjustUrlParameter(cUrl,'agency',agencyIds);
            cUrl = adjustUrlParameter(cUrl,'vendorcode',oVendorCodes);
            cUrl = adjustUrlParameter(cUrl,'vendornm',oVendorNms);
            cUrl = adjustUrlParameter(cUrl,'contnum_exact',oContractNumber);
            cUrl = adjustUrlParameter(cUrl,'subvendorstatus',oSubVendorStatus);
            cUrl = adjustUrlParameter(cUrl,'mwbe',oMinorityTypeId);
            cUrl = adjustUrlParameter(cUrl,'vendortype',oVendorType);
            cUrl = adjustUrlParameter(cUrl,'curamtr',oCurAmount);
            cUrl = adjustUrlParameter(cUrl,'awdmethod',oAwdMethod);
            cUrl = adjustUrlParameter(cUrl,'cindustry',oIndustryType);
            cUrl = adjustUrlParameter(cUrl,'subcontstatus',oSubContStatus);

            return cUrl;
        }

        function fnLoadChildRecords (nTr, oElement)
        {
            var magid = jQuery(oElement).attr('magid');
            var year = jQuery(oElement).attr('year');
            var yeartype = jQuery(oElement).attr('yeartype');
            var mastercode = jQuery(oElement).attr('mastercode');
            var mwbe = jQuery(oElement).attr('mwbe');
            var dashboard = jQuery(oElement).attr('dashboard');
            var subcontstatus = jQuery(oElement).attr('subcontstatus');
            var subvendorstatus = jQuery(oElement).attr('subvendorstatus');
            var contstatus = jQuery(oElement).attr('contstatus');

            magid = (magid == null || magid.length == 0) ?  '0' : magid;

            var sUrl = '/dashboard_platform/data_tables/ajax_data/node/940/magid/'+magid;
            sUrl = sUrl + ( (contstatus == null || contstatus.length == 0) ?  '' : '/contstatus/'+contstatus);
            sUrl = sUrl + ( (mwbe == null || mwbe.length == 0) ?  '' : '/mwbe/'+mwbe);
            sUrl = sUrl + ( (dashboard == null || dashboard.length == 0) ?  '' : '/dashboard/'+dashboard);
            sUrl = sUrl + ( (subcontstatus == null || subcontstatus.length == 0) ?  '' : '/subcontstatus/'+subcontstatus);
            sUrl = sUrl + ( (subvendorstatus == null || subvendorstatus.length == 0) ?  '' : '/subvendorstatus/'+subvendorstatus);

            jQuery.ajax({
                url: sUrl,
                dataType: 'json',
                type: 'GET',
                success: function(results) {
                    if(eval(results['aaData']) && results['aaData'].length > 0) {
                        var data = results['aaData'];
                        var dataLen = results['aaData'].length;
                        var sOut = '<div class=\"sub-table-wrapper\"><table>';

                        for(i=0;i<dataLen;i++){
                            var row = data[i];

                            sOut += '<tr>';
                            sOut += '<td class=\"text\" style=\"width:180px\">'+ (row[1] == null ? '': row[1])+'</td>';
                            sOut += '<td class=\"sub-cont-status\"  style=\"width:180px\">'+ (row[2] == null ? '': row[2])+'</td>';
                            sOut += '<td class=\"text\"  style=\"width:180px\">'+ (row[3] == null ? '': row[3])+'</td>';
                            sOut += '<td class=\"text\"  style=\"width:180px\">'+ (row[4] == null ? '': row[4])+'</td>';
                            sOut += '<td class=\"vers-num\"  style=\"width:180px\">'+ (row[5] == null ? '': row[5])+'</td>';
                            sOut += '<td class=\"text\"  style=\"width:180px\">'+ (row[6] == null ? '': row[6])+'</td>';
                            sOut += '<td class=\"number\"  style=\"width:180px\">'+ (row[7] == null ? '': row[7])+'</td>';
                            sOut += '<td class=\"number\"  style=\"width:180px\">'+ (row[8] == null ? '': row[8])+'</td>';
                            sOut += '<td class=\"number\"  style=\"width:180px\">'+ (row[9] == null ? '': row[9])+'</td>';
                            sOut += '<td class=\"number\"  style=\"width:180px\">'+ (row[10] == null ? '': row[10])+'</td>';
                            sOut += '<td class=\"number\"  style=\"width:180px\">'+ (row[11] == null ? '': row[11])+'</td>';
                            sOut += '<td class=\"text\"  style=\"width:180px\">'+ (row[12] == null ? '': row[12])+'</td>';
                            sOut += '<td class=\"text\"  style=\"width:180px\">'+ (row[13] == null ? '': row[13])+'</td>';
                            sOut += '<td class=\"text\"  style=\"width:180px\">'+ (row[14] == null ? '': row[14])+'</td>';
                            sOut += '<td class=\"text\"  style=\"width:180px\">'+ (row[15] == null ? '': row[15])+'</td>';
                            sOut += '<td class=\"text\"  style=\"width:180px\">'+ (row[16] == null ? '': row[16])+'</td>';
                            sOut += '<td class=\"text\"  style=\"width:180px\">'+ (row[17] == null ? '': row[17])+'</td>';
                            sOut += '<td class=\"text\"  style=\"width:180px\">'+ (row[18] == null ? '': row[18])+'</td>';
                            sOut += '<td class=\"text\"  style=\"width:180px\">'+ (row[19] == null ? '': row[19])+'</td>';
                            sOut += '<td class=\"text\"  style=\"width:180px\">'+ (row[20] == null ? '': row[20])+'</td>';
                            sOut += '<td class=\"text\"  style=\"width:180px\">'+ (row[21] == null ? '': row[21])+'</td>';
                            sOut += '<td class=\"text\"  style=\"width:180px\">'+ (row[22] == null ? '': row[22])+'</td>';
                            sOut += '<td class=\"text\"  style=\"width:180px\">'+ (row[23] == null ? '': row[23])+'</td>';
                            sOut += '<td class=\"text\" style=\"width:180px;\">'+ (row[24] == null ? '': row[24])+'</td>';
                            sOut += '<td style=\"width:10px\"></td>';
                            sOut += '</tr>';
                        }
                        sOut += '</table></div>';
                        oTable.fnOpen( nTr, sOut, 'childcontracts' );
                    }

                    jQuery(oElement).removeClass('loader').addClass('expanded');
                    if(jQuery.browser.msie && jQuery.browser.version == '7.0') {}
                    else {
                        jQuery('td.childcontracts div.sub-table-wrapper').jScrollPane({
                            verticalDragMinHeight: 10,
                            verticalDragMaxHeight: 10,
                            showArrows: true,
                            verticalArrowPositions: 'split'
                        });
                    }
                }
            });

            return '';
        }
    "
}