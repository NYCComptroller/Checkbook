{
    "datasets": {
        "subcontract_status_by_prime_contract": {
            "datasourceName": "main",
            "source": "subcontract_status_by_prime_contract"
        },

        "mixed_vendor_data":{
            "datasourceName":"main",
            "source":"SELECT CASE WHEN mixed_vendor_name_id_by_type ~* '(.*P:*.)|(.*PM:*.)' THEN prime_vendor_name_id END as vendor_name_id, prime_vendor_name_id, sub_vendor_name_id, prime_vendor_name as vendor_name, mixed_vendor_name_id, mixed_vendor_name_id_by_type, contract_number, agency_id, prime_minority_type_id, sub_minority_type_id, aprv_sta_id, starting_year_id, ending_year_id, effective_begin_year_id, effective_end_year_id FROM subcontract_status_by_prime_contract
            UNION ALL
            SELECT CASE WHEN mixed_vendor_name_id_by_type ~* '(.*S:*.)|(.*SM:*.)' THEN sub_vendor_name_id END as vendor_name_id, prime_vendor_name_id, sub_vendor_name_id, sub_vendor_name as vendor_name, mixed_vendor_name_id, mixed_vendor_name_id_by_type, contract_number, agency_id, prime_minority_type_id, sub_minority_type_id, aprv_sta_id, starting_year_id, ending_year_id, effective_begin_year_id, effective_end_year_id FROM subcontract_status_by_prime_contract
            "
        },
        "mixed_vendor_type_data":{
            "datasourceName":"main",
            "source":"SELECT CASE WHEN mixed_vendor_name_id_by_type ~* '(.*P:*.)|(.*PM:*.)' THEN 'PRIME VENDOR' END as vendor_type,'P' as vendor_type_id, prime_vendor_name_id, sub_vendor_name_id, prime_vendor_name_id as mixed_vendor_name_id, mixed_vendor_name_id_by_type, contract_number, agency_id, prime_minority_type_id, sub_minority_type_id, aprv_sta_id, starting_year_id, ending_year_id, effective_begin_year_id, effective_end_year_id FROM subcontract_status_by_prime_contract
                      UNION ALL
                      SELECT CASE WHEN mixed_vendor_name_id_by_type ~* '(.*S:*.)|(.*SM:*.)' THEN 'SUB VENDOR' END as vendor_type,'S' as vendor_type_id, prime_vendor_name_id, sub_vendor_name_id, sub_vendor_name_id as mixed_vendor_name_id, mixed_vendor_name_id_by_type, contract_number, agency_id, prime_minority_type_id, sub_minority_type_id, aprv_sta_id, starting_year_id, ending_year_id, effective_begin_year_id, effective_end_year_id FROM subcontract_status_by_prime_contract
                      UNION ALL
                      SELECT CASE WHEN mixed_vendor_name_id_by_type ~* '(.*PM:*.)' THEN 'M/WBE VENDOR' END as vendor_type,'M' as vendor_type_id, prime_vendor_name_id, sub_vendor_name_id, prime_vendor_name_id as mixed_vendor_name_id, mixed_vendor_name_id_by_type, contract_number, agency_id, prime_minority_type_id, sub_minority_type_id, aprv_sta_id, starting_year_id, ending_year_id, effective_begin_year_id, effective_end_year_id FROM subcontract_status_by_prime_contract
                      UNION ALL
                      SELECT CASE WHEN mixed_vendor_name_id_by_type ~* '(.*SM:*.)' THEN 'M/WBE VENDOR' END as vendor_type,'M' as vendor_type_id, prime_vendor_name_id, sub_vendor_name_id, sub_vendor_name_id as mixed_vendor_name_id, mixed_vendor_name_id_by_type, contract_number, agency_id, prime_minority_type_id, sub_minority_type_id, aprv_sta_id, starting_year_id, ending_year_id, effective_begin_year_id, effective_end_year_id FROM subcontract_status_by_prime_contract
            "
        }
    },
    "cubes":   {
        "subcontract_status_by_prime_contract": {
            "sourceDatasetName": "subcontract_status_by_prime_contract",
            "dimensions": [
                {
                    "name": "agency",
                    "levels": [
                        {
                            "name": "agency",
                            "datasetName": "agency",
                            "sourceColumnName": "agency_id"
                        }
                    ]
                },
                {
                    "name": "contract_number",
                    "levels": [
                        {
                            "name": "contract_number",
                            "sourceColumnName": "contract_number"
                        }
                    ]
                },
                {
                    "name": "aprv_sta",
                    "levels": [
                        {
                            "name": "aprv_sta",
                            "sourceColumnName": "aprv_sta_id"
                        }
                    ]
                },
                {
                    "name": "aprv_sta_value",
                    "levels": [
                        {
                            "name": "aprv_sta_value",
                            "sourceColumnName": "aprv_sta_value"
                        }
                    ]
                },
                {
                    "name": "prime_vendor",
                    "levels": [
                        {
                            "name": "prime_vendor",
                            "sourceColumnName": "prime_vendor_id"
                        }
                    ]
                },
                {
                    "name": "prime_vendor_name",
                    "levels": [
                        {
                            "name": "prime_vendor_name",
                            "sourceColumnName": "prime_vendor_name"
                        }
                    ]
                },
                {
                    "name": "sub_vendor",
                    "levels": [
                        {
                            "name": "sub_vendor",
                            "sourceColumnName": "sub_vendor_id"
                        }
                    ]
                },
                {
                    "name": "sub_vendor_name",
                    "levels": [
                        {
                            "name": "sub_vendor_name",
                            "sourceColumnName": "sub_vendor_name"
                        }
                    ]
                },
                {
                    "name": "prime_minority_type",
                    "levels": [
                        {
                            "name": "prime_minority_type",
                            "sourceColumnName": "prime_minority_type_id"
                        }
                    ]
                },
                {
                    "name": "prime_minority_type_name",
                    "levels": [
                        {
                            "name": "prime_minority_type_name",
                            "sourceColumnName": "prime_minority_type_name"
                        }
                    ]
                },
                {
                    "name": "sub_minority_type",
                    "levels": [
                        {
                            "name": "sub_minority_type",
                            "sourceColumnName": "sub_minority_type_id"
                        }
                    ]
                },
                {
                    "name": "sub_minority_type_name",
                    "levels": [
                        {
                            "name": "sub_minority_type_name",
                            "sourceColumnName": "sub_minority_type_name"
                        }
                    ]
                }
            ],
            "measures": {
                "txcount": {
                    "function": "COUNT(*)"
                }
            }
        },

        "mixed_vendor_data":{
            "sourceDatasetName":"mixed_vendor_data",
            "dimensions":[
                {
                    "name": "vendor_name",
                    "levels": [
                        {
                            "name": "vendor_name",
                            "sourceColumnName": "vendor_name"
                        }
                    ]
                },
                {

                    "name": "vendor_name_id",
                    "levels": [
                        {
                            "name": "vendor_name_id",
                            "sourceColumnName": "vendor_name_id"
                        }
                    ]
                }
            ],
            "measures": {
                "txcount": {
                    "function": "COUNT(*)"
                }
            }
        },

        "mixed_vendor_type_data":{
            "sourceDatasetName":"mixed_vendor_type_data",
            "dimensions":[
                {
                    "name": "vendor_type",
                    "levels": [
                        {
                            "name": "vendor_type",
                            "sourceColumnName": "vendor_type"
                        }
                    ]
                },
                {
                    "name": "vendor_type_id",
                    "levels": [
                        {
                            "name": "vendor_type_id",
                            "sourceColumnName": "vendor_type_id"
                        }
                    ]
                }
            ],
            "measures": {
                "txcount": {
                    "function": "COUNT(*)"
                }
            }
        }
    }
}