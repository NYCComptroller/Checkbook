{
    "serviceName": "PayrollWidgetService",
    "dataFunc": "GetAgenciesByPayroll",
    "headerTitle": "Agencies",
    "headerSubTitle": "Agencies",
    "transformationPHP":"
        $employee_totals = PayrollUtil::getAgencyEmployeeCountByType(
                            _getRequestParamValue('year'),
                            _getRequestParamValue('yeartype'),
                            _getRequestParamValue('title'));
        foreach($node->data as &$row) {
            $agency_id = $row['agency_agency'];
            $row['total_salaried_employees'] = $employee_totals[$row['agency_agency']]['total_salaried_employees'];
            $row['total_non_salaried_employees'] = $employee_totals[$row['agency_agency']]['total_non_salaried_employees'];
        }
        return $node->data;
        ",
    "table_columns": [
        {
            "labelAlias":"agency_name",
            "column":"agency_name"
        },
        {
            "labelAlias":"no_of_sal_employees",
            "column":"total_salaried_employees"
        },
        {
            "labelAlias":"no_of_non_sal_employees",
            "column":"total_non_salaried_employees"
        },
        {
            "labelAlias":"gross_pay_ytd",
            "column":"total_gross_pay",
            "format": "dollar"
        },
        {
            "labelAlias":"other_pay_ytd",
            "column":"total_other_payments",
            "format": "dollar"
        },
        {
            "labelAlias": "",
            "column": ""
        }
    ],
    "dataTableOptions": {
        "aoColumns": [
            {"bSortable":false,"sClass":"text","asSorting": [ "asc","desc" ]},
            {"bSortable":true,"sClass":"number","sWidth":"170px","asSorting": [ "desc","asc"  ]},
            {"bSortable":true,"sClass":"number","sWidth":"180px","asSorting": [ "desc","asc"  ]},
            {"bSortable":true,"sClass":"number","sWidth":"130px","asSorting": [ "desc","asc"  ]},
            {"bSortable":true,"sClass":"number","sWidth":"160px","asSorting": [ "desc","asc"  ]},
            {"bSortable": false,"sWidth":"15px" }
        ],
        "aaSorting": [[3, "desc"]],
        "bServerSide": true,
        "bFilter": false,
        "bPaginate": false,
        "bProcessing": true,
        "bLengthChange": false,
        "bInfo": false,
        "bAutoWidth": false,
        "fnServerParams": "##function ( aoData ) { reloadExpandCollapseWidget(this,aoData); }##",
        "oLanguage": {
            "sProcessing": "<img src='/sites/all/themes/checkbook/images/loading_large.gif' title='Processing...'/>"
        }
    }
}
