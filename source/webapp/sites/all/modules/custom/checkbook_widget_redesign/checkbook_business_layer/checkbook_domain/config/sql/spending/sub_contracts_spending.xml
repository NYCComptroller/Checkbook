
<statements>
    <statement name="GetSubVendorsChecks" datasource="checkbook">
        <param name="year" required ="true"/>
        <param name="category" type="int"/>
        <param name="mwbe" />
        <sql>
            SELECT
            a.check_eft_issued_date,
            a.agency_id,
            a.agency_name,
            a.vendor_id,
            a.vendor_name,
            b.legal_name AS legal_name_checkbook_sub_vendor,
            a.prime_vendor_id,
            c.legal_name AS legal_name_checkbook_prime_vendor,
            a.check_amount,
            a.minority_type_id
            FROM subcontract_spending_details a
            JOIN subvendor b ON b.vendor_id = a.vendor_id
            JOIN vendor c ON c.vendor_id = a.prime_vendor_id
            <where>
                <exp op="AND">
                    <exp op="=" dbField="a.check_eft_issued_nyc_year_id" paramName="year" />
                    <exp op="IN" dbField="a.minority_type_id" paramName="mwbe"/>
                    <exp op="=" dbField="a.spending_category_id" paramName="category"/>
                </exp>
            </where>
        </sql>
    </statement>
    
</statements>