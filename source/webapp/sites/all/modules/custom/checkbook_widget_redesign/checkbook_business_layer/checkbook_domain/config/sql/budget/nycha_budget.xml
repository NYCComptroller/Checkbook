<statements>

  <!--Expense Categories Methods-->
  <statement name="GetNychaExpenseCategoriesByBudget" datasource="checkbook_nycha">
    <param name="year" required ="true" type="int" />
    <param name="respcenter" type="string" />
    <sql>
      SELECT
      expenditure_type_description AS expense_category,
      expenditure_type_code,
      SUM(adopted_budget) AS adopted_budget,
      SUM(modified_budget) AS modified_budget,
      SUM(funds_available)AS funds_available,
      SUM(committed)AS committed
      FROM budget
      <where>
        <exp op="AND">
          <exp op="=" dbField="budget_fiscal_year_id" paramName="year" />
          <exp op="=" dbField="responsibility_center_code" paramName="respcenter" />
        </exp>
      </where>
      GROUP BY expenditure_type_description,expenditure_type_code
    </sql>
  </statement>

  <statement name="GetNychaExpenseCategoriesByCommittedExpenseBudget" datasource="checkbook_nycha">
    <param name="year" required ="true" type="int" />
    <param name="respcenter" type="string" />
    <sql>
      SELECT
      expenditure_type_description AS expense_category,
      expenditure_type_code,
      SUM(committed) AS committed,
      SUM(encumbrance_amount) AS encumbrance_amount,
      SUM(actual_amount) AS actual_amount
      FROM budget
      <where>
        <exp op="AND">
          <exp op="=" dbField="budget_fiscal_year_id" paramName="year" />
          <exp op="=" dbField="responsibility_center_code" paramName="respcenter" />
        </exp>
      </where>
      GROUP BY expenditure_type_description, expenditure_type_code
    </sql>
  </statement>

  <statement name="GetResponsibilityCenters" datasource="checkbook_nycha">
    <param name="year" required ="true" type="int" />
    <param name="expcategory" type="int" />
    <sql>
      SELECT
      responsibility_center_description AS responsibility_center,
      responsibility_center_code,
      SUM(adopted_budget) AS adopted_budget,
      SUM(modified_budget) AS modified_budget,
      SUM(committed) AS committed,
      SUM(funds_available) AS funds_available
      FROM budget
      <where>
        <exp op="AND">
          <exp op="=" dbField="budget_fiscal_year_id" paramName="year" />
          <exp op="=" dbField="expenditure_type_code" paramName="expcategory" />
        </exp>
      </where>
      GROUP BY responsibility_center_description, responsibility_center_code
    </sql>
  </statement>

  <statement name="GetResponsibilityCentersByCommittedExpense" datasource="checkbook_nycha">
    <param name="year" required ="true" type="int" />
    <param name="expcategory" type="string" />
    <sql>
      SELECT
      responsibility_center_description AS responsibility_center,
      responsibility_center_code,
      SUM(committed) AS committed,
      SUM(encumbrance_amount) AS encumbrance_amount,
      SUM(actual_amount) AS actual_amount
      FROM budget
      <where>
        <exp op="AND">
          <exp op="=" dbField="budget_fiscal_year_id" paramName="year" />
          <exp op="=" dbField="expenditure_type_code" paramName="expcategory" />
        </exp>
      </where>
      GROUP BY responsibility_center_description, responsibility_center_code
    </sql>
  </statement>

  <statement name="GetFundingSources" datasource="checkbook_nycha">
    <param name="year" required ="true" type="int" />
    <param name="expcategory" type="string" />
    <param name="respcenter" type="string" />
    <sql>
      SELECT
      DISTINCT(funding_source_description) AS funding_source_description,
      SUM(adopted_budget) AS adopted_budget,
      SUM(modified_budget) AS modified_budget,
      SUM(committed) AS committed,
      SUM(funds_available) AS funds_available
      FROM budget
      <where>
        <exp op="AND">
          <exp op="=" dbField="budget_fiscal_year_id" paramName="year" />
          <exp op="=" dbField="expenditure_type_code" paramName="expcategory" />
          <exp op="=" dbField="responsibility_center_code" paramName="respcenter" />
        </exp>
      </where>
      GROUP BY funding_source_description
    </sql>
  </statement>

  <statement name="GetFundingSourcesByCommittedExpense" datasource="checkbook_nycha">
    <param name="year" required ="true" type="int" />
    <param name="expcategory" type="string" />
    <param name="respcenter" type="string" />
    <sql>
      SELECT
      DISTINCT(funding_source_description) AS funding_source_description,
      SUM(committed) AS committed,
      SUM(encumbrance_amount) AS encumbrance_amount,
      SUM(actual_amount) AS actual_amount
      FROM budget
      <where>
        <exp op="AND">
          <exp op="=" dbField="budget_fiscal_year_id" paramName="year" />
          <exp op="=" dbField="expenditure_type_code" paramName="expcategory" />
          <exp op="=" dbField="responsibility_center_code" paramName="respcenter" />
        </exp>
      </where>
      GROUP BY funding_source_description
    </sql>
  </statement>

  <statement name="GetPrograms" datasource="checkbook_nycha">
    <param name="year" required ="true" type="int" />
    <param name="expcategory" type="string" />
    <param name="respcenter" type="string" />
    <sql>
      SELECT
      DISTINCT(program_phase_description) AS program_phase_description,
      SUM(adopted_budget) AS adopted_budget,
      SUM(modified_budget) AS modified_budget,
      SUM(committed) AS committed,
      SUM(funds_available) AS funds_available
      FROM budget
      <where>
        <exp op="AND">
          <exp op="=" dbField="budget_fiscal_year_id" paramName="expcategory" />
          <exp op="=" dbField="expenditure_type_code" paramName="expcategory" />
          <exp op="=" dbField="responsibility_center_code" paramName="respcenter" />
        </exp>
      </where>
      GROUP BY program_phase_description
    </sql>
  </statement>

  <statement name="GetProgramsByCommittedExpense" datasource="checkbook_nycha">
    <param name="year" required ="true" type="int" />
    <param name="expcategory" type="string" />
    <param name="respcenter" type="string" />
    <sql>
      SELECT
      DISTINCT(program_phase_description) AS program_phase_description,
      SUM(committed) AS committed,
      SUM(encumbrance_amount) AS encumbrance_amount,
      SUM(actual_amount) AS actual_amount
      FROM budget
      <where>
        <exp op="AND">
          <exp op="=" dbField="budget_fiscal_year_id" paramName="year" />
          <exp op="=" dbField="expenditure_type_code" paramName="expcategory" />
          <exp op="=" dbField="responsibility_center_code" paramName="respcenter" />
        </exp>
      </where>
      GROUP BY program_phase_description
    </sql>
  </statement>

  <statement name="GetProjects" datasource="checkbook_nycha">
    <param name="year" required ="true" type="int" />
    <param name="expcategory" type="string" />
    <param name="respcenter" type="string" />
    <sql>
      SELECT
      DISTINCT(gl_project_description) AS gl_project_description,
      SUM(adopted_budget) AS adopted_budget,
      SUM(modified_budget) AS modified_budget,
      SUM(committed) AS committed,
      SUM(funds_available) AS funds_available
      FROM budget
      <where>
        <exp op="AND">
          <exp op="=" dbField="budget_fiscal_year_id" paramName="year" />
          <exp op="=" dbField="expenditure_type_code" paramName="expcategory" />
          <exp op="=" dbField="responsibility_center_code" paramName="respcenter" />
        </exp>
      </where>
      GROUP BY gl_project_description
    </sql>
  </statement>

  <statement name="GetProjectsByCommittedExpense" datasource="checkbook_nycha">
    <param name="year" required ="true" type="int" />
    <param name="expcategory" type="string" />
    <param name="respcenter" type="string" />
    <sql>
      SELECT
      DISTINCT(gl_project_description) AS gl_project_description,
      SUM(committed) AS committed,
      SUM(encumbrance_amount) AS encumbrance_amount,
      SUM(actual_amount) AS actual_amount
      FROM budget
      <where>
        <exp op="AND">
          <exp op="=" dbField="budget_fiscal_year_id" paramName="year" />
          <exp op="=" dbField="expenditure_type_code" paramName="expcategory" />
          <exp op="=" dbField="responsibility_center_code" paramName="respcenter" />
        </exp>
      </where>
      GROUP BY gl_project_description
    </sql>
  </statement>
</statements>


