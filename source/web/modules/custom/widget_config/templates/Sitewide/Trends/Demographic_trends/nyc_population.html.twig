{#
/**
 * This file is part of the Checkbook NYC financial transparency software.
 *
 * Copyright (C) 2012, 2013 New York City
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Affero General Public License as
 * published by the Free Software Foundation, either version 3 of the
 * License, or (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU Affero General Public License for more details.
 *
 * You should have received a copy of the GNU Affero General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
*/#}

{{ attach_library('widget_highcharts/grid-view') }}
{{ node.widgetConfig.header |raw }}

{% set last_data = node.data|last %}
{% set last_year = last_data.fiscal_year %}

  <a class="trends-export" href="/export/trends/download/{{node.nid}}">Export</a>

  <table id="table_{{ node.nid }}" style='display:none' class="trendsShowOnLoad {{node.widgetConfig.html_class}}">
    {{addCaption(node) |raw}}
    <thead>
    <tr>
      <th>&nbsp;</th>
      <th colspan="4" class="centrig bb"><div>2001-{{ last_year }}<sup>*</sup></div></th>
    </tr>
    <tr>
      <th class="number" ><div class="trendCen">Year</div></th>
      <th class="number"><div class="trendCen">United States</div></th>
      <th class="number"><div class="trendCen">Percentage<br>Change from<br>Prior Period</div></th>
      <th class="number"><div class="trendCen">City of<br>New York</div></th>
      <th class="number"><div class="trendCen">Percentage<br>Change from<br>Prior Period</div></th>
    </tr>
    </thead>

    <tbody>

    {{ nycPopulation(node) }}

    </tbody>
  </table>
  <div class="footnote">
    <p>Source: Bureau of Economic Analysis and US Census Bureau.</p>
    <p>*Figures as of July 2022</p>
  </div>

<script type="text/javascript">
  {{ addJs(node)|raw }}
</script>

{% if node.widgetConfig.table_footnote %}
  {{ node.widgetConfig.table_footnote }}
{% endif %}
